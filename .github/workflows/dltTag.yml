name: Delete-tag-and-release
on:
  workflow_dispatch:
permissions:
  contents: write
  packages: read
jobs:
  delete:
    runs-on: ubuntu-latest
    steps:
     - uses: actions/checkout@v2
       with:
        ref: '1.0-SNAPSHOT'
     - name: Deleting Snapshot version
       run: | 
            gh release list >> release.txt
            ls -lrta
            echo ---------------file content---------
            cat release.txt
            echo ----------------- each line content-----------------
            while read line; do echo $line; done < release.txt
            echo -------------grep result----------------------------
            grep -i "^AppName-1.0-SNAPSHOT" release.txt | { grep -v grep || true; }
           
       env:
           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}   
