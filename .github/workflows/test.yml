name: Node.js CI

on:
  workflow_dispatch:

jobs:
  Set_Release_Version:
    runs-on: ubuntu-latest
    outputs:
      currentversion: ${{ steps.version.outputs.currentversion }}
    steps:
      - uses: actions/checkout@v2
      - id: version
        run: |
          echo setting release version!!  
          echo "${{ github.run_number }}" >> version.cfg
          newversion=$(cat version.cfg | tr -d "[:space:]")
          echo $newversion is the version
          echo "::set-output name=currentversion::$newversion"
  set-job-name:
        needs: Set_Release_Version
        runs-on: ubuntu-latest
        steps:
          - run: echo hello world
          - uses: actions/checkout@v2
          - name: Use Node.js 16
            uses: actions/setup-node@v3
            with:
              node-version: '16'   
          - run: |
              echo ${GITHUB_REF##*/}
              branch=`echo "${GITHUB_REF##*/}"`
              echo ${{needs.Set_Release_Version.outputs.currentversion}}
          - name: test    
            if [ "$branch" = "master" ]
            run: echo if working
       
